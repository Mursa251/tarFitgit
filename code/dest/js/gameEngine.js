"use strict";var gameEngine={ele:null,allBullet:{},allEnemy:{},totalScore:0,init:function(){return gameEngine.ele=document.getElementById("main"),this},start:function(){console.log("开始游戏"),gameEngine.loadding(function(){console.log("游戏加载完毕"),myPlane.init().move(),myPlane.fire(),gameEngine.listeningKeybord(),gameEngine.createEnemy(),gameEngine.listeningCrash(),gameEngine.moveBackground()})},loadding:function(e){var n=document.createElement("div");n.className="logo",gameEngine.ele.appendChild(n);var l=document.createElement("div");l.className="load",gameEngine.ele.appendChild(l);var a=["images2/loading1.png","images2/loading2.png","images2/loading3.png"],o=0,t=setInterval(function(){o>=5?(clearInterval(t),gameEngine.ele.removeChild(n),gameEngine.ele.removeChild(l),e()):l.style.background="url("+a[++o%3]+") no-repeat"},500)},listeningKeybord:function(){var e=0,n=0;window.onkeydown=function(l){37==(l=l||event).keyCode?e=-10:39==l.keyCode?e=10:38==l.keyCode?n=-10:40==l.keyCode&&(n=10)},window.onkeyup=function(){e=0,n=0},setInterval(function(){var l=myPlane.ele.offsetLeft+e;l<0&&(l=0),l>gameEngine.ele.offsetWidth-myPlane.ele.offsetWidth&&(l=gameEngine.ele.offsetWidth-myPlane.ele.offsetWidth),myPlane.ele.style.left=l+"px",myPlane.ele.style.top=myPlane.ele.offsetTop+n+"px"},30)},createEnemy:function(){setInterval(function(){Math.random()>.4&&new Enemy(Enemy.prototype.Enemy_Type_Small).init().move()},1e3),setInterval(function(){Math.random()>.6&&new Enemy(Enemy.prototype.Enemy_Type_Middle).init().move()},2e3),setInterval(function(){Math.random()>.5&&new Enemy(Enemy.prototype.Enemy_Type_Large).init().move()},8e3)},listeningCrash:function(){var e=!1;setInterval(function(){for(var n in gameEngine.allEnemy){for(var l in gameEngine.allBullet)isCrash(gameEngine.allEnemy[n].ele,gameEngine.allBullet[l].ele)&&(gameEngine.allBullet[l].boom(),delete gameEngine.allBullet[l],gameEngine.allEnemy[n].hurt());if(!e&&isCrash(gameEngine.allEnemy[n].ele,myPlane.ele)){e=!0,console.log("Game Over");var a=prompt("您的总分数是:"+gameEngine.totalScore+", 请输入您的大名");a?ajax({type:"post",url:"http://60.205.181.47/myPHPCode4/uploadScore.php",data:{name:a,score:gameEngine.totalScore},async:!0,success:function(e){console.log(e),location.href="03_rand.html"},error:function(){console.log("error")}}):location.reload()}}},30)},moveBackground:function(){var e=0;setInterval(function(){gameEngine.ele.style.backgroundPositionY=e+++"px"},30)},score:function(){}};